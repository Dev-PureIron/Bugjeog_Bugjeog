<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bugjeogbugjeog.app.bugjeogbugjeog.mapper.MyPageMapper">
    <!-- 이용자가 댓글 단 목록-->
    <select id="replyList" resultType="myPageReplyDTO">
        select  r.board_free_id, board_free_title, board_free_content, board_free_register_date, board_free_update_date, board_free_like,reply_content, reply_register_date, reply_update_date
        from tbl_free_reply r join tbl_board_free f
        on r.board_free_id = f.board_free_id and r.member_id = #{memberId}
        limit #{criteria.startRow}, #{criteria.amount}
    </select>

    <!-- 이용자의 댓글 갯수-->
    <select id="replyCount" resultType="int">
        select count(reply_id) from tbl_free_reply where member_id = #{memberId}
    </select>

    <!-- 자유게시판 작성 목록-->
    <select id="freeList" resultType="boardFreeVO">
        select board_free_id, member_id, business_id, board_free_title, board_free_content, board_free_register_date, board_free_update_date, board_free_like
        from tbl_board_free where member_id = #{memberId}
        limit #{criteria.startRow}, #{criteria.amount}
    </select>

    <select id="freeCount" resultType="int">
        select count(board_free_id) from tbl_board_free where member_id = #{memberId}
    </select>

    <!--유통 업체 정보 조회-->
    <select id="selectBuisness" resultType="businessVO">
        select business_id, business_email, business_password, business_ceo_name, business_number, business_company_name, business_phone_number, business_establishment_date, business_img_original_name, business_img_uuid, business_img_path, business_location, business_category
        from tbl_business where business_id = #{businessId}
    </select>

    <!--유통 분야 설정 추가-->
    <update id="updateLocation">
        UPDATE tbl_business
        SET business_email=#{businessEmail}, business_password=#{businessPassword}, business_ceo_name=#{businessCeoName}, business_number=#{businessNumber}, business_company_name=#{businessCompanyName}, business_phone_number=#{businessPhoneNumber}, business_establishment_date= #{businessEstablishmentDate}, business_register_date= #{businessRegisterDate}, business_status= #{businessStatus}, business_img_original_name=#{businessImgOriginalName}, business_img_uuid=#{businessImgUuid}, business_img_path=#{businessImgPath}, business_img_original_name=#{businessImgOriginalName}, business_location=#{businessLocation}, business_category=#{businessCategory}
        WHERE business_id = #{businessId}
    </update>
</mapper>