<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bugjeogbugjeog.app.bugjeogbugjeog.mapper.MyPageMapper">
    <!--유저 정보 조회-->
    <select id="select" resultType="memberVO">
        select member_id, member_email, member_password ,member_phone_number, member_name, member_img_original_name, member_img_uuid, member_img_path
        from tbl_member where member_id = #{member_id}
    </select>

    <!-- 모든 유저 핸드폰 번호 조회-->
    <select id="selectAllPhoneNumber" resultType="String">
        select member_phone_number from tbl_member
    </select>
    <!--이용자  정보 업데이트-->
    <update id="update">
        UPDATE tbl_member
        SET member_email=#{memberEmail}, member_password=#{memberPassword}, member_name=#{memberName}, member_img_original_name=#{memberImgOriginalName}, member_img_uuid=#{memberImgUuid}, member_img_path=#{memberImgPath}, member_phone_number= #{memberPhoneNumber}
        WHERE member_id = #{memberId}
    </update>

    <!--이용자 좋아요 한 게시물 수-->
    <select id="likeCount" resultType="int">
        select count(free_like_id) from tbl_free_like where member_id = #{memberId}
    </select>

    <!--이용자 좋아요 한 게시물 번호들-->
    <select id="likeListNumber" resultType="long">
        select board_free_id from tbl_free_like where member_id = #{memberId}
    </select>

    <!--이용자 좋아요 한 게시물 리스트-->
    <select id="likeList" resultType="memberLikeDTO">
        select m.member_id, member_email, member_phone_number, member_name, member_img_original_name, member_img_uuid, member_img_path,
        board_free_id, board_free_title, board_free_content, board_free_register_date, board_free_update_date, board_free_like
        from tbl_board_free b join tbl_member m
        on b.member_id = m.member_id and board_free_id = #{boardFreeId}
    </select>

    <!-- 이용자의 문의게시판 목록 -->
    <select id="inquireList" resultType="memberInquireDTO">
        select m.member_id, member_email, member_phone_number, member_name, member_img_original_name, member_img_uuid, member_img_path,
        board_inquiry_id, board_inquiry_title, board_inquiry_content, board_inquiry_register_date, board_inquiry_status
        from tbl_board_inquiry i join tbl_member m
        on i.member_id = m.member_id and i.member_id = #{memberId}
    </select>

    <!-- 이용자의 문의글 작성 수-->
    <select id="inquireCount" resultType="int">
        select count(member_id) from tbl_board_inquiry where member_id = #{memberId}
    </select>

    <!-- 문의 게시판 답변했는지 안했는지 유무 확인 -->
    <select id="answerCheck" resultType="long">
        select board_inquiry_id from tbl_board_inquiry_answer where board_inquiry_id = #{boardInquiryId};
    </select>

    <!--유통 업체 정보 조회-->
    <select id="selectBuisness" resultType="businessVO">
        select business_id, business_email, business_password, business_ceo_name, business_number, business_company_name, business_phone_number, business_establishment_date, business_img_original_name, business_img_uuid, business_img_path
        from tbl_business where business_id = #{businessId}
    </select>
</mapper>